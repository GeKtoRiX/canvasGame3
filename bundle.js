(()=>{"use strict";var i={156:(i,t,o)=>{i.exports=o.p+"6967efc2c9ee1250dc72.png"},928:(i,t,o)=>{i.exports=o.p+"66b2c6fcf4a806ae78fc.png"}},t={};function o(e){var s=t[e];if(void 0!==s)return s.exports;var n=t[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"==typeof window)return window}}(),(()=>{var i;o.g.importScripts&&(i=o.g.location+"");var t=o.g.document;if(!i&&t&&(t.currentScript&&(i=t.currentScript.src),!i)){var e=t.getElementsByTagName("script");e.length&&(i=e[e.length-1].src)}if(!i)throw new Error("Automatic publicPath is not supported in this browser");i=i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=i})(),(()=>{var i=o(156),t=o(928);function e(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function s(i,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function n(i,t,o){return t&&s(i.prototype,t),o&&s(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}var h=document.getElementById("canvas"),a=h.getContext("2d");h.width=window.innerWidth-4,h.height=window.innerHeight-4;var r={a:{pressed:!1},d:{pressed:!1},space:{pressed:!1}},c=!1,p=[],d=[],l=[],y=[],u=[];window.addEventListener("keydown",(function(i){switch(i.key){case"a":r.a.pressed=!0;break;case"d":r.d.pressed=!0;break;case" ":var t=360*Math.random();l.push(new f({position:{x:k.position.x+k.size.width/2,y:k.position.y-k.size.height},velocity:{x:0,y:-15}},15,"hsl(".concat(t,", 50%, 50%)"))),r.space.pressed=!0;break;default:console.log("undefined key")}})),window.addEventListener("keyup",(function(i){switch(i.key){case"a":r.a.pressed=!1;break;case"d":r.d.pressed=!1;break;case" ":r.space.pressed=!1;break;default:console.log("undefined key")}}));var v=function(){function i(){var o=this;e(this,i),this.size={width:0,height:0};var s=new Image;s.src=t,s.onload=function(){o.playerShip=s,o.size.width=.25*o.playerShip.width,o.size.height=.25*o.playerShip.height},this.position={x:h.width/2,y:h.height},this.velocity={x:0,y:0},this.rotation=0}return n(i,[{key:"draw",value:function(){a.save(),a.translate(k.position.x+k.size.width/2,k.position.y+k.size.height/2),a.rotate(this.rotation),a.translate(-k.position.x-k.size.width/2,-k.position.y-k.size.height/2),a.drawImage(this.playerShip,this.position.x,this.position.y-this.size.height,this.size.width,this.size.height),a.restore()}},{key:"update",value:function(){this.playerShip&&(k.draw(),this.position.x+=this.velocity.x)}}]),i}(),f=function(){function i(t,o,s){var n=t.position,h=t.velocity;e(this,i),this.position=n,this.velocity=h,this.radius=o,this.color=s}return n(i,[{key:"draw",value:function(){a.fillStyle=this.color,a.beginPath(),a.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,!1),a.fill(),a.closePath()}},{key:"update",value:function(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}]),i}(),w=function(){function i(t,o){var s=t.position,n=t.velocity;e(this,i),a.lineCap="square",this.position=s,this.velocity=n,this.size={width:12,height:30},this.color=o}return n(i,[{key:"draw",value:function(){a.fillStyle=this.color,a.fillRect(this.position.x,this.position.y,this.size.width,this.size.height)}},{key:"update",value:function(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}]),i}(),x=function(){function i(t,o,s){var n=t.position,h=t.velocity;e(this,i),this.position=n,this.velocity=h,this.radius=o,this.color=s,this.opacity=1}return n(i,[{key:"draw",value:function(){a.fillStyle=this.color,a.shadowBlur=40,a.save(),a.globalAlpha=this.opacity,a.beginPath(),a.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,!1),a.fill(),a.closePath(),a.restore()}},{key:"update",value:function(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.opacity-=.01}}]),i}(),g=function(){function i(){e(this,i),this.position={x:Math.random()*h.width,y:Math.random()*h.height},this.velocity={x:0,y:1},this.radius=4*Math.random()+.5,this.color="hsl(".concat(360*Math.random(),", 50%, 50%)"),a.shadowBlur=20}return n(i,[{key:"draw",value:function(){a.fillStyle=this.color,a.globalAlpha=this.opacity,a.beginPath(),a.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,!1),a.fill(),a.closePath()}},{key:"update",value:function(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}]),i}(),z=function(){function t(o){var s=this,n=o.position;e(this,t),this.size={width:0,height:0};var h=new Image;h.src=i,h.onload=function(){s.invader=h,s.size.width=.08*s.invader.width,s.size.height=.08*s.invader.height},this.position={x:n.x,y:n.y},this.velocity={x:0,y:0}}return n(t,[{key:"draw",value:function(){a.drawImage(this.invader,this.position.x,this.position.y,this.size.width,this.size.height)}},{key:"update",value:function(i){var t=i.velocity;this.invader&&(this.draw(),this.position.x+=t.x,this.position.y+=t.y)}},{key:"shoot",value:function(i){i.push(new w({position:{x:this.position.x+this.size.width/2,y:this.position.y+this.size.height},velocity:{x:0,y:5}},"gold"))}}]),t}(),m=function(){function i(){e(this,i);var t=Math.floor(6*Math.random()+4),o=Math.floor(3*Math.random()+1);this.position={x:0,y:0},this.velocity={x:4,y:0},this.invaders=[],this.width=97*t;for(var s=0;s<t;s++)for(var n=0;n<o;n++)this.invaders.push(new z({position:{x:100*s,y:100*n}}))}return n(i,[{key:"update",value:function(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.y=0,(this.position.x+this.width>=h.width||this.position.x<=0)&&(this.velocity.x=-this.velocity.x,this.velocity.y=200)}}]),i}(),b=0,k=new v;!function(){for(var i=0;i<100;i++)d.push(new g)}(),function i(){window.requestAnimationFrame(i),a.fillStyle="rgba(0, 0, 0, 0.5)",a.fillRect(0,0,h.width,h.height),d.forEach((function(i){i.position.y-i.radius>=h.height?(i.position.x=Math.random()*h.width,i.position.y=-i.radius):i.update()})),c||k.update(),p.forEach((function(i,t){i.opacity<=0?p.splice(t,1):i.update()})),c||l.forEach((function(i,t){i.position.y+i.radius<=0?l.splice(t,1):i.update()})),u.forEach((function(i){i.update(),b%100==0&&i.invaders.length>0&&i.invaders[Math.floor(Math.random()*i.invaders.length)].shoot(y),i.invaders.forEach((function(t,o){t.update({velocity:i.velocity}),l.forEach((function(e,s){if(e.position.y-e.radius<=t.position.y+t.size.height-50&&e.position.x+e.radius>=t.position.x&&e.position.x-e.radius<=t.position.x+t.size.width&&e.position.y+e.radius>=t.position.y){for(var n=0;n<14*Math.random()+7;n++)p.push(new x({position:{x:t.position.x+t.size.width/2,y:t.position.y+t.size.height/2},velocity:{x:3*(Math.random()-.5),y:2*(Math.random()-.5)}},3*Math.random()+.5,"#8a2be2"));console.log(p),setTimeout((function(){if(i.invaders.splice(o,1),l.splice(s,1),i.invaders.length>0){var t=i.invaders[0],e=i.invaders[i.invaders.length-1];i.width=e.position.x-t.position.x+e.size.width,i.position.x=t.position.x}}),0)}}))}))})),y.forEach((function(i,t){if(i.position.y+i.size.height>=h.height?y.splice(t,1):i.update(),i.position.y+i.size.height>=k.position.y-k.size.height/2&&i.position.x+i.size.width>=k.position.x&&i.position.x<=k.position.x+k.size.width){y.splice(t,1),c=!0;for(var o=0;o<28*Math.random()+14;o++)p.push(new x({position:{x:i.position.x+i.size.width/2,y:i.position.y+i.size.height/2},velocity:{x:3*(Math.random()-.5),y:2*(Math.random()-.5)}},3*Math.random()+.8,"#90ee90"))}})),r.a.pressed&&k.position.x>=0?(k.velocity.x=-10,k.rotation=-.15):r.d.pressed&&k.position.x+k.size.width<=h.width?(k.velocity.x=10,k.rotation=.15):r.space.pressed||(k.velocity.x=0,k.rotation=0),b%1e3==0&&(u.push(new m),console.log(u)),b++}()})()})();